<div *ngIf="!loader">
  <button class="mb-2" mat-raised-button color="success" routerLink="/tasks"><i class="fas fa-chevron-left"></i>  Retour aux tâches</button>

  <div class="row">

  <div *ngIf="selectedTask" class="col-lg-7 col-sm-12">

  <div class="card">
    <div class="card-header taskName">{{ selectedTask.name }}</div>
    <div class="card-text">
        <div class="description">
          {{selectedTask.description}}
          <div class="author">Tâche créée par {{ selectedTask.author.first_name + ' ' + selectedTask.author.last_name }} </div>
        </div>
      <ul>

        <li>Début : <span class="date">{{ selectedTask.startingDate | date:'dd/MM/yyyy' }}</span></li>
        <li>Fin : <span class="date">{{ selectedTask.endingDate | date:'dd/MM/yyyy' }}</span></li>
        <li>Statut : <span [ngStyle] = "{ 'color' : getStatus() === 'En attente' ? 'red' : 'green', 'fontWeight' : 'bold' }" >{{ getStatus() }}</span>

      </ul>
      <div>
        
      <button *ngIf="!openSelect" mat-raised-button color="primary" (click)="onClickOpenSelect()">Modifier
          statut</button>
      <div *ngIf="openSelect" class="ml-4 mr-4">
        <mat-form-field>
          <mat-select [(value)]="selectedTask.status" >
            <mat-option color="red" value="pending">En attente</mat-option>
            <mat-option value="ongoing">En cours</mat-option>
            <mat-option value="done">Terminée</mat-option>
          </mat-select>
        </mat-form-field>
        <div class="row">
          <div class="col-6">
              <button  mat-raised-button class="buttonStyle" color="success" (click)="onSelectStatus()"> Enregistrer </button>
              <div *ngIf="loader" class="loader"></div>
          </div>
          <div class="col-6">
              <button mat-raised-button class="buttonStyle" color="warn" (click)="onCancelStatus()"> Annuler </button>
          </div>
      </div>
      </div>

    </div>
    </div>
  </div>


  <div class="card">
    <div class="card-header"> Chat</div>
    <div class=card-text></div>
  </div>

</div>

<div *ngIf="selectedTask" class="col-lg-5 col-sm-12">

  <div class="card">
      <div class="card-header"> Groupes reliés </div>
      <ul class="list-group list-group-flush">
          <li *ngFor="let group of selectedTask.groups" class="list-group-item list-group-item-action">{{ group.name }}</li>
      </ul>
    </div> 

  <div class="card">
    <div class="card-header"> WP reliés </div>
    <div class=card-text></div>
  </div>

  <div class="card">
    <div class="card-header">Tâches reliées</div>
    <div class=card-text></div>
  </div>


</div>

  </div> 
</div>

<div *ngIf="loader" fxLayoutAlign="space-around center" style="overflow:hidden">
  <div class="loader">
  </div> 
</div>